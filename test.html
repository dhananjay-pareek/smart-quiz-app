<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Learn-It-All Quiz</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .card {
            background-color: white;
            border-radius: 1rem;
            padding: 2rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
        }
        .btn {
            display: inline-block;
            padding: 0.75rem 1.5rem;
            border-radius: 0.5rem;
            font-weight: 600;
            text-align: center;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: none;
        }
        .btn-primary {
            background-color: #4f46e5;
            color: white;
        }
        .btn-primary:hover {
            background-color: #4338ca;
        }
        .btn-secondary {
            background-color: #e5e7eb;
            color: #1f2937;
        }
         .btn-secondary:hover {
            background-color: #d1d5db;
        }
        .option-btn {
            width: 100%;
            text-align: left;
            background-color: #f9fafb;
            color: #1f2937;
            border: 1px solid #d1d5db;
        }
        .option-btn:hover {
            background-color: #f3f4f6;
        }
        .option-btn.correct {
            background-color: #dcfce7;
            border-color: #22c55e;
            color: #166534;
        }
        .option-btn.incorrect {
            background-color: #fee2e2;
            border-color: #ef4444;
            color: #991b1b;
        }
        .hidden {
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen flex items-center justify-center p-4">

    <div id="app" class="max-w-2xl w-full">
        <div id="main-menu" class="card text-center">
            <h1 class="text-4xl font-bold text-gray-800 mb-2">Learn-It-All Quiz</h1>
            <p class="text-gray-600 mb-8">Master any subject with smart quizzes.</p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center">
                <button id="start-quiz-btn" class="btn btn-primary">Start Quiz</button>
                <button id="add-questions-btn" class="btn btn-secondary">Add Custom Questions</button>
            </div>
        </div>

        <div id="chapter-selection-view" class="card hidden">
             <h2 class="text-3xl font-bold text-gray-800 text-center mb-6">Select a Chapter</h2>
             <div id="chapter-list-container" class="space-y-3">
                 </div>
             <div class="mt-6 text-center">
                <button id="back-to-menu-from-chapters-btn" class="btn btn-secondary">Back to Main Menu</button>
            </div>
        </div>

        <div id="quiz-view" class="card hidden">
            <div class="mb-6">
                <div class="flex justify-between items-center mb-2">
                    <button id="home-btn" class="text-sm font-semibold text-gray-600 hover:text-indigo-600 transition-colors">‚Üê Home</button>
                    <div class="flex items-center gap-4">
                        <p class="text-sm font-medium text-gray-500">Question <span id="question-count"></span></p>
                        <p class="text-sm font-medium text-indigo-600">Score: <span id="score-count">0</span></p>
                    </div>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>
            <h2 id="question-text" class="text-2xl font-semibold text-gray-800 mb-6"></h2>
            <div id="options-container" class="space-y-4"></div>
            <div class="flex justify-end mt-6">
                <button id="skip-question-btn" class="btn btn-secondary text-sm">Skip Question</button>
            </div>
            <p id="feedback-text" class="mt-4 text-center font-semibold text-lg"></p>
        </div>
        
        <div id="quiz-complete-view" class="card hidden">
            <div class="text-center">
                <h1 class="text-4xl font-bold text-gray-800 mb-2">Congratulations!</h1>
                <p class="text-gray-600 mb-4">You've completed the quiz.</p>
                <p class="text-3xl font-bold text-indigo-600 mb-6">Final Score: <span id="final-score"></span></p>
            </div>

            <div id="quiz-summary" class="mt-6">
                </div>

            <div class="flex flex-col sm:flex-row gap-4 justify-center mt-8">
                <button id="play-again-btn" class="btn btn-primary">Play Same Chapter</button>
                <button id="back-to-menu-btn" class="btn btn-secondary">Main Menu</button>
            </div>
        </div>

        <div id="add-questions-view" class="card hidden">
            <h2 class="text-3xl font-bold text-gray-800 mb-6 text-center">Add Custom Questions</h2>
        
            <div class="mb-8 p-4 border rounded-lg">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Add a Single Question</h3>
                <div class="space-y-4">
                    <div>
                        <label for="chapter-name-input" class="block text-sm font-medium text-gray-700">Chapter Name</label>
                        <input type="text" id="chapter-name-input" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="e.g., JavaScript Basics">
                    </div>
                    <div>
                        <label for="question-text-input" class="block text-sm font-medium text-gray-700">Question</label>
                        <textarea id="question-text-input" rows="2" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500" placeholder="What is the capital of France?"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">Options (select the correct one)</label>
                        <div id="single-question-options-container" class="mt-2 space-y-2">
                            </div>
                    </div>
                    <button id="save-question-btn" class="btn btn-primary w-full">Save Question</button>
                    <p id="single-add-feedback" class="text-center text-sm font-medium h-4"></p>
                </div>
            </div>
        
            <div class="p-4 border rounded-lg">
                <h3 class="text-xl font-semibold text-gray-700 mb-4">Bulk Add Questions</h3>
                <p class="text-sm text-gray-500 mb-2">Paste a JSON array of chapters. Each chapter must have a 'name' and a 'questions' array.</p>
                <div class="bg-gray-800 text-white p-2 rounded-md text-xs mb-4 overflow-x-auto">
                    <pre><code>[
  {
    "name": "New Chapter Name",
    "questions": [
      {
        "text": "Question 1?",
        "options": ["A", "B", "C", "D"],
        "answer": 0
      }
    ]
  }
]</code></pre>
                </div>
                <textarea id="bulk-questions-input" rows="6" class="w-full border border-gray-300 rounded-md shadow-sm p-2 font-mono text-sm" placeholder="Paste your JSON here..."></textarea>
                <button id="save-bulk-btn" class="btn btn-primary w-full mt-4">Save Bulk Questions</button>
                <p id="bulk-add-feedback" class="text-center text-sm font-medium mt-2 h-4"></p>
            </div>
        
            <div class="mt-8 text-center">
                <button id="back-to-menu-from-add-btn" class="btn btn-secondary">Back to Main Menu</button>
            </div>
        </div>

    </div>

    <div id="confirm-modal" class="fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center hidden z-50">
        <div class="bg-white rounded-lg p-6 shadow-xl w-full max-w-sm">
            <h3 id="modal-title" class="text-lg font-medium text-gray-900 mb-4">Confirmation</h3>
            <p id="modal-body" class="text-sm text-gray-600 mb-6"></p>
            <div class="flex justify-end gap-4">
                <button id="modal-cancel-btn" class="btn btn-secondary">Cancel</button>
                <button id="modal-confirm-btn" class="btn btn-primary">OK</button>
            </div>
        </div>
    </div>

    <script>
        const App = {
            // STATE
            state: {
                currentView: 'main-menu',
                chapters: [],
                quizQueue: [],
                currentQuestionIndex: 0,
                selectedChapterIndex: -1,
                score: 0,
                totalInitialQuestions: 0,
                incorrectlyAnswered: [],
            },

            // UI ELEMENTS
            elements: {
                mainMenu: document.getElementById('main-menu'),
                chapterSelectionView: document.getElementById('chapter-selection-view'),
                quizView: document.getElementById('quiz-view'),
                quizCompleteView: document.getElementById('quiz-complete-view'),
                addQuestionsView: document.getElementById('add-questions-view'),
                
                // Buttons
                startQuizBtn: document.getElementById('start-quiz-btn'),
                addQuestionsBtn: document.getElementById('add-questions-btn'),
                playAgainBtn: document.getElementById('play-again-btn'),
                backToMenuBtn: document.getElementById('back-to-menu-btn'),
                homeBtn: document.getElementById('home-btn'),
                skipQuestionBtn: document.getElementById('skip-question-btn'),
                backToMenuFromAddBtn: document.getElementById('back-to-menu-from-add-btn'),
                backToMenuFromChaptersBtn: document.getElementById('back-to-menu-from-chapters-btn'),

                // Chapter UI
                chapterListContainer: document.getElementById('chapter-list-container'),
                
                // Quiz UI
                questionCount: document.getElementById('question-count'),
                scoreCount: document.getElementById('score-count'),
                progressBar: document.getElementById('progress-bar'),
                questionText: document.getElementById('question-text'),
                optionsContainer: document.getElementById('options-container'),
                feedbackText: document.getElementById('feedback-text'),
                
                // Complete View UI
                finalScore: document.getElementById('final-score'),
                quizSummary: document.getElementById('quiz-summary'),

                // Add Questions UI
                chapterNameInput: document.getElementById('chapter-name-input'),
                questionTextInput: document.getElementById('question-text-input'),
                singleQuestionOptionsContainer: document.getElementById('single-question-options-container'),
                saveQuestionBtn: document.getElementById('save-question-btn'),
                singleAddFeedback: document.getElementById('single-add-feedback'),
                bulkQuestionsInput: document.getElementById('bulk-questions-input'),
                saveBulkBtn: document.getElementById('save-bulk-btn'),
                bulkAddFeedback: document.getElementById('bulk-add-feedback'),

                // Modal UI
                confirmModal: document.getElementById('confirm-modal'),
                modalBody: document.getElementById('modal-body'),
                modalConfirmBtn: document.getElementById('modal-confirm-btn'),
                modalCancelBtn: document.getElementById('modal-cancel-btn'),
            },

            // INITIALIZATION
            init() {
                this.loadChapters();
                this.bindEvents();
                this.switchView('main-menu');
            },

            // EVENT BINDING
            bindEvents() {
                this.elements.startQuizBtn.addEventListener('click', () => this.switchView('chapter-selection-view'));
                this.elements.addQuestionsBtn.addEventListener('click', () => this.switchView('add-questions-view'));
                this.elements.playAgainBtn.addEventListener('click', () => this.startChapterQuiz(this.state.selectedChapterIndex));
                this.elements.backToMenuBtn.addEventListener('click', () => this.switchView('main-menu'));
                this.elements.backToMenuFromChaptersBtn.addEventListener('click', () => this.switchView('main-menu'));
                this.elements.homeBtn.addEventListener('click', () => this.showConfirmModal("End quiz and return home? Progress will be lost.", () => this.switchView('main-menu')));
                this.elements.skipQuestionBtn.addEventListener('click', () => this.skipQuestion());
                this.elements.backToMenuFromAddBtn.addEventListener('click', () => this.switchView('main-menu'));
                this.elements.modalCancelBtn.addEventListener('click', () => this.hideConfirmModal());
                this.elements.saveQuestionBtn.addEventListener('click', () => this.saveSingleQuestion());
                this.elements.saveBulkBtn.addEventListener('click', () => this.saveBulkQuestions());
            },
            
            // VIEW MANAGEMENT & RENDERING
            switchView(viewName) {
                this.state.currentView = viewName;
                this.render();
            },
            
            render() {
                const allViews = [ 'mainMenu', 'chapterSelectionView', 'quizView', 'quizCompleteView', 'addQuestionsView'];
                allViews.forEach(viewKey => this.elements[viewKey].classList.add('hidden'));
                
                const viewMap = {
                    'main-menu': 'mainMenu',
                    'chapter-selection-view': 'chapterSelectionView',
                    'quiz-view': 'quizView',
                    'quiz-complete-view': 'quizCompleteView',
                    'add-questions-view': 'addQuestionsView',
                };
                this.elements[viewMap[this.state.currentView]].classList.remove('hidden');

                if (this.state.currentView === 'add-questions-view') {
                    this.renderAddQuestionForm();
                }
                if(this.state.currentView === 'chapter-selection-view'){
                    this.renderChapterSelection();
                }
            },

            // QUIZ LOGIC
            startChapterQuiz(chapterIndex) {
                const chapter = this.state.chapters[chapterIndex];
                if (!chapter || chapter.questions.length === 0) {
                     this.showConfirmModal("This chapter has no questions.", () => this.switchView('chapter-selection-view'));
                    return;
                }
                
                this.state.score = 0;
                this.state.currentQuestionIndex = 0;
                this.state.selectedChapterIndex = chapterIndex;
                this.state.incorrectlyAnswered = [];
                // Create a deep copy and shuffle
                this.state.quizQueue = JSON.parse(JSON.stringify(chapter.questions)).sort(() => Math.random() - 0.5);
                this.state.totalInitialQuestions = this.state.quizQueue.length;

                this.switchView('quiz-view');
                this.displayCurrentQuestion();
            },

            displayCurrentQuestion() {
                this.elements.feedbackText.textContent = '';
                if (this.state.currentQuestionIndex >= this.state.quizQueue.length) {
                    this.completeQuiz();
                    return;
                }

                const question = this.state.quizQueue[this.state.currentQuestionIndex];
                
                this.elements.questionText.textContent = question.text;
                this.elements.scoreCount.textContent = this.state.score;
                this.elements.questionCount.textContent = `${this.state.currentQuestionIndex + 1} / ${this.state.quizQueue.length}`;
                
                const progress = this.state.totalInitialQuestions > 0 ? ((this.state.currentQuestionIndex) / this.state.totalInitialQuestions) * 100 : 0;
                this.elements.progressBar.style.width = `${progress}%`;

                this.elements.optionsContainer.innerHTML = '';
                question.options.forEach((option, index) => {
                    const button = document.createElement('button');
                    button.textContent = option;
                    button.className = 'btn option-btn';
                    button.addEventListener('click', () => this.handleAnswer(index, button));
                    this.elements.optionsContainer.appendChild(button);
                });
            },

            handleAnswer(selectedIndex, selectedButton) {
                const question = this.state.quizQueue[this.state.currentQuestionIndex];
                const isCorrect = selectedIndex === question.answer;

                this.elements.optionsContainer.querySelectorAll('button').forEach(btn => btn.disabled = true);
                this.elements.skipQuestionBtn.disabled = true;

                if (isCorrect) {
                    this.state.score++;
                    selectedButton.classList.add('correct');
                    this.elements.feedbackText.textContent = 'Correct!';
                    this.elements.feedbackText.className = 'mt-4 text-center font-semibold text-lg text-green-600';
                } else {
                    this.state.incorrectlyAnswered.push(question);
                    selectedButton.classList.add('incorrect');
                    this.elements.optionsContainer.children[question.answer].classList.add('correct');
                    this.elements.feedbackText.textContent = 'Incorrect.';
                    this.elements.feedbackText.className = 'mt-4 text-center font-semibold text-lg text-red-600';
                }
                
                setTimeout(() => {
                    this.state.currentQuestionIndex++;
                    this.elements.skipQuestionBtn.disabled = false;
                    this.displayCurrentQuestion();
                }, 1500);
            },

            skipQuestion() {
                // Ensure there is a question to skip.
                if (this.state.quizQueue.length > this.state.currentQuestionIndex) {
                    // Get the current question object.
                    const skippedQuestion = this.state.quizQueue[this.state.currentQuestionIndex];

                    // Add it to the list of questions to be reviewed later.
                    this.state.incorrectlyAnswered.push(skippedQuestion);

                    // Move to the next question in the queue.
                    this.state.currentQuestionIndex++;
                    
                    // Display the next question or complete the quiz.
                    this.displayCurrentQuestion();
                }
            },

            completeQuiz() {
                this.elements.finalScore.textContent = `${this.state.score} / ${this.state.totalInitialQuestions}`;
                this.renderQuizSummary();
                this.switchView('quiz-complete-view');
            },

            renderQuizSummary(){
                this.elements.quizSummary.innerHTML = '';
                if (this.state.incorrectlyAnswered.length === 0) {
                    this.elements.quizSummary.innerHTML = '<p class="text-center text-green-600 font-medium">Perfect score! No incorrect answers to review.</p>';
                    return;
                }

                let summaryHtml = '<h3 class="text-xl font-bold text-gray-800 mb-4 text-center">Review Incorrect Answers</h3><div class="space-y-4">';
                this.state.incorrectlyAnswered.forEach(q => {
                    const correctAnswerText = q.options[q.answer];
                    summaryHtml += `
                        <div class="p-3 bg-gray-50 rounded-lg border">
                            <p class="font-semibold text-gray-700">${q.text}</p>
                            <p class="text-sm text-green-600 mt-1">Correct answer: ${correctAnswerText}</p>
                        </div>
                    `;
                });
                summaryHtml += '</div>';
                this.elements.quizSummary.innerHTML = summaryHtml;
            },

            // CONTENT MANAGEMENT & LOCAL STORAGE
            async loadChapters() {
                try {
                    // 1. Load base chapters from local JSON files
                    const indexResponse = await fetch('./chapters.json');
                    if (!indexResponse.ok) throw new Error(`HTTP error! status: ${indexResponse.status}`);
                    const chapterFiles = await indexResponse.json();
            
                    const chapterPromises = chapterFiles.map(file =>
                        fetch(`./chapters/${file}`).then(res => res.ok ? res.json() : null)
                    );
                    const baseChapters = (await Promise.all(chapterPromises)).filter(Boolean); // Filter out nulls from failed fetches
                    this.state.chapters = baseChapters;

                    // 2. Load custom-added questions from localStorage and merge them
                    const customData = localStorage.getItem('customQuizQuestions');
                    if (customData) {
                        const customChapters = JSON.parse(customData);
                        customChapters.forEach(customChapter => {
                            const existingChapter = this.state.chapters.find(c => c.name.trim().toLowerCase() === customChapter.name.trim().toLowerCase());
                            if (existingChapter) {
                                // Merge questions into the existing chapter from files
                                existingChapter.questions.push(...customChapter.questions);
                            } else {
                                // Add as a completely new chapter
                                this.state.chapters.push(customChapter);
                            }
                        });
                    }
                } catch (error) {
                    console.error("Could not load chapter data:", error);
                    this.elements.mainMenu.innerHTML = `<div class="text-red-600 text-center"><h2 class="text-2xl font-bold mb-2">Error</h2><p>Could not load quiz content. Please ensure 'chapters.json' and chapter files exist and are correct.</p></div>`;
                }
            },

            saveCustomQuestion(chapterName, newQuestion) {
                // Get current custom questions from localStorage
                const customData = localStorage.getItem('customQuizQuestions');
                let customChapters = customData ? JSON.parse(customData) : [];

                // Find or create the chapter within the custom data structure
                let chapterToUpdate = customChapters.find(c => c.name.trim().toLowerCase() === chapterName.trim().toLowerCase());
                if (chapterToUpdate) {
                    chapterToUpdate.questions.push(newQuestion);
                } else {
                    customChapters.push({ name: chapterName, questions: [newQuestion] });
                }
                
                // Save the updated custom data back to localStorage
                localStorage.setItem('customQuizQuestions', JSON.stringify(customChapters));

                // Update the live state for the current session
                let liveChapter = this.state.chapters.find(c => c.name.trim().toLowerCase() === chapterName.trim().toLowerCase());
                if (liveChapter) {
                    liveChapter.questions.push(newQuestion);
                } else {
                    this.state.chapters.push({ name: chapterName, questions: [newQuestion] });
                }
            },

            saveSingleQuestion() {
                const chapterName = this.elements.chapterNameInput.value.trim();
                const questionText = this.elements.questionTextInput.value.trim();
                const options = [...this.elements.singleQuestionOptionsContainer.querySelectorAll('input[type="text"]')].map(input => input.value.trim());
                const correctAnswerInput = this.elements.singleQuestionOptionsContainer.querySelector('input[type="radio"]:checked');

                if (!chapterName || !questionText || options.some(opt => !opt) || !correctAnswerInput) {
                    this.elements.singleAddFeedback.textContent = "Please fill out all fields.";
                    this.elements.singleAddFeedback.className = 'text-center text-sm font-medium text-red-600';
                    return;
                }

                const newQuestion = { text: questionText, options: options, answer: parseInt(correctAnswerInput.value, 10) };
                this.saveCustomQuestion(chapterName, newQuestion);

                this.elements.singleAddFeedback.textContent = "Question saved successfully!";
                this.elements.singleAddFeedback.className = 'text-center text-sm font-medium text-green-600';
                this.renderAddQuestionForm(); // Clear the form
            },

            saveBulkQuestions() {
                const jsonInput = this.elements.bulkQuestionsInput.value.trim();
                if (!jsonInput) {
                    this.elements.bulkAddFeedback.textContent = "Textarea is empty.";
                    this.elements.bulkAddFeedback.className = 'text-center text-sm font-medium text-red-600';
                    return;
                }

                try {
                    const bulkData = JSON.parse(jsonInput);
                    if (!Array.isArray(bulkData) || !bulkData.every(c => c.name && Array.isArray(c.questions))) {
                        throw new Error("Invalid format. Must be an array of chapters.");
                    }

                    bulkData.forEach(chapter => {
                        chapter.questions.forEach(question => {
                            this.saveCustomQuestion(chapter.name, question);
                        });
                    });

                    this.elements.bulkAddFeedback.textContent = "Bulk questions added successfully!";
                    this.elements.bulkAddFeedback.className = 'text-center text-sm font-medium text-green-600';
                    this.elements.bulkQuestionsInput.value = '';

                } catch (error) {
                    this.elements.bulkAddFeedback.textContent = `Error: ${error.message}`;
                    this.elements.bulkAddFeedback.className = 'text-center text-sm font-medium text-red-600';
                }
            },
            
            // DYNAMIC UI RENDERING
            renderChapterSelection() {
                this.elements.chapterListContainer.innerHTML = '';
                 if (this.state.chapters.length === 0) {
                    this.elements.chapterListContainer.innerHTML = `<p class="text-gray-500 text-center bg-gray-50 p-4 rounded-md">No chapters found. Try adding some custom questions!</p>`;
                    return;
                }
                this.state.chapters.forEach((chapter, index) => {
                    const button = document.createElement('button');
                    button.innerHTML = `<span>${index + 1}. ${chapter.name}</span><span class="text-sm text-gray-500">${chapter.questions.length} questions</span>`;
                    button.className = 'w-full flex justify-between items-center p-4 rounded-lg bg-indigo-50 hover:bg-indigo-100 transition-colors text-indigo-800 font-semibold';
                    button.onclick = () => this.startChapterQuiz(index);
                    this.elements.chapterListContainer.appendChild(button);
                });
            },

            renderAddQuestionForm() {
                this.elements.chapterNameInput.value = '';
                this.elements.questionTextInput.value = '';
                this.elements.bulkQuestionsInput.value = '';
                this.elements.singleAddFeedback.textContent = '';
                this.elements.bulkAddFeedback.textContent = '';
                
                const optionsContainer = this.elements.singleQuestionOptionsContainer;
                optionsContainer.innerHTML = '';
                for (let i = 0; i < 4; i++) {
                    const div = document.createElement('div');
                    div.className = 'flex items-center gap-2';
                    div.innerHTML = `
                        <input type="radio" name="correct-answer" value="${i}" id="option-radio-${i}" class="h-4 w-4 text-indigo-600 border-gray-300 focus:ring-indigo-500">
                        <input type="text" placeholder="Option ${i + 1}" class="block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 text-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500">
                    `;
                    optionsContainer.appendChild(div);
                }
                document.getElementById('option-radio-0').checked = true;
            },
            
            // MODAL UTILITIES
            showConfirmModal(message, onConfirmCallback) {
                this.elements.modalBody.textContent = message;
                this.elements.confirmModal.classList.remove('hidden');
                
                const newConfirmBtn = this.elements.modalConfirmBtn.cloneNode(true);
                this.elements.modalConfirmBtn.parentNode.replaceChild(newConfirmBtn, this.elements.modalConfirmBtn);
                this.elements.modalConfirmBtn = newConfirmBtn;
                
                this.elements.modalConfirmBtn.onclick = () => { this.hideConfirmModal(); onConfirmCallback(); };
            },
            hideConfirmModal() { this.elements.confirmModal.classList.add('hidden'); },
        };

        App.init();
    </script>
</body>
</html>